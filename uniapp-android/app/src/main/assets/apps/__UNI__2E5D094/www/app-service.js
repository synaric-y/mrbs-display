if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(t){const e=this.constructor;return this.then((n=>e.resolve(t()).then((()=>n))),(n=>e.resolve(t()).then((()=>{throw n}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const t=uni.requireGlobal();ArrayBuffer=t.ArrayBuffer,Int8Array=t.Int8Array,Uint8Array=t.Uint8Array,Uint8ClampedArray=t.Uint8ClampedArray,Int16Array=t.Int16Array,Uint16Array=t.Uint16Array,Int32Array=t.Int32Array,Uint32Array=t.Uint32Array,Float32Array=t.Float32Array,Float64Array=t.Float64Array,BigInt64Array=t.BigInt64Array,BigUint64Array=t.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(t){"use strict";function e(t,e,...n){uni.__log__?uni.__log__(t,e,...n):console[t].apply(console,[...n,e])}__definePage("pages/index/index",((t,e)=>{const n=t.__vccOpts||t;for(const[a,i]of e)n[a]=i;return n})({batteryInterval:null,data:()=>({wvNode:null,wvURL:uni.getStorageSync("webview-url")||"https://meeting-manage-dev.businessconnectchina.com:11443/display/v2.1/index.html"}),onLoad(){const t=getCurrentPages(),e=t[t.length-1].$getAppWebview(),n=this;setTimeout((()=>{n.wvNode=e.children()[0],n.sendDeviceInfo(),n.sendBatteryInfo(),n.batteryInterval&&clearInterval(n.batteryInterval),n.batteryInterval=setInterval(n.sendBatteryInfo,3e5)}),2e3)},methods:{handleWebviewMessage(t){e("log","at pages/index/index.vue:52","接收到消息："+JSON.stringify(t.detail.data[0]));const n=t.detail.data[0].type,a=t.detail.data[0].value,i=this;switch(n){case"scan":i.sendQRCodeResult();break;case"brightness":i.sendBrightness();break;case"volume":i.sendVolume();break;case"changeBrightness":i.changeBrightness(a);break;case"changeVolume":i.changeVolume(a);break;case"testVolume":i.testVolume();break;case"restart":i.restart();break;case"updateWvURL":i.updateWvURL(a)}},updateWvURL(t){this.wvURL=t,uni.setStorageSync("webview-url",t),plus.runtime.restart()},sendDeviceInfo(){let t=uni.getDeviceInfo();e("log","at pages/index/index.vue:98",JSON.stringify(t)),this.wvNode.evalJS(`document.dispatchEvent(new CustomEvent('getDeviceInfo', {\n\t\t\t\t\tdetail: {\n\t\t\t\t\t\tvalue: '${JSON.stringify(t)}'\n\t\t\t\t\t}\n\t\t\t\t}))`)},sendBatteryInfo(){const t=this.getBatteryInfo();e("log","at pages/index/index.vue:114","新api获取电量信息res:",t);const n=t;this.wvNode.evalJS(`document.dispatchEvent(new CustomEvent('getBatteryInfo', {\n\t\t\t\t\tdetail: {\n\t\t\t\t\t\tvalue: '${JSON.stringify(n)}'\n\t\t\t\t\t}\n\t\t\t\t}))`)},sendQRCodeResult(){const t=this;uni.scanCode({success:function(n){const a=n.result;e("log","at pages/index/index.vue:137",a),t.wvNode.evalJS(`document.dispatchEvent(new CustomEvent('getScanResult', {\n\t\t\t\t\t\t\tdetail: {\n\t\t\t\t\t\t\t\tvalue: '${a}'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}))`)},fail:function(t){e("log","at pages/index/index.vue:149",t)}})},sendBrightness(){const t=this;uni.getScreenBrightness({success:function(n){e("log","at pages/index/index.vue:158",n),t.wvNode.evalJS(`document.dispatchEvent(new CustomEvent('getInitialBrightness', {\n\t\t\t\t\t\t\tdetail: {\n\t\t\t\t\t\t\t\tvalue: '${n.value}'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}))`)}})},sendVolume(){this.wvNode.evalJS(`document.dispatchEvent(new CustomEvent('getInitialVolume', {\n\t\t\t\t\tdetail: {\n\t\t\t\t\t\tvalue: '${plus.device.getVolume()}'\n\t\t\t\t\t}\n\t\t\t\t}))`)},changeBrightness(t){uni.setScreenBrightness({value:t,success:function(){e("log","at pages/index/index.vue:188","success")}})},changeVolume(t){plus.device.setVolume(t),e("log","at pages/index/index.vue:195",plus.device.getVolume())},testVolume(){let t=plus.android.runtimeMainActivity(),e=plus.android.importClass("android.media.RingtoneManager"),n=e.getActualDefaultRingtoneUri(t,e.TYPE_NOTIFICATION),a=plus.android.importClass("android.media.MediaPlayer").create(t,n);a.setLooping(!1),a.prepare(),a.start()},restart(){plus.runtime.restart()},getBatteryInfo(){const t=plus.android.runtimeMainActivity();var n=plus.android.importClass("android.content.Intent"),a=plus.android.importClass("android.content.IntentFilter");const i=plus.android.invoke(t,"getApplicationContext");e("log","at pages/index/index.vue:224",i);const r=plus.android.importClass("android.os.BatteryManager");e("log","at pages/index/index.vue:227",r);const s=new a(n.ACTION_BATTERY_CHANGED);e("log","at pages/index/index.vue:230",s);const o=i.registerReceiver(null,s);e("log","at pages/index/index.vue:233",o);var l=o.getIntExtra(r.EXTRA_STATUS,-1),u=o.getIntExtra(r.EXTRA_LEVEL,-1),d=l==r.BATTERY_STATUS_CHARGING||l==r.BATTERY_STATUS_FULL;return e("log","at pages/index/index.vue:240",l),e("log","at pages/index/index.vue:241",u),e("log","at pages/index/index.vue:242",d),{isCharging:d,errMsg:"getBatteryInfo:ok",level:u}}},onUnload(){this.batteryInterval&&(clearInterval(this.batteryInterval),this.batteryInterval=null)}},[["render",function(e,n,a,i,r,s){return t.openBlock(),t.createElementBlock("web-view",{id:"wv",src:r.wvURL,onMessage:n[0]||(n[0]=(...t)=>s.handleWebviewMessage&&s.handleWebviewMessage(...t))},null,40,["src"])}]]));const n={onLaunch:function(){e("log","at App.vue:4","App Launch")},onShow:function(){e("log","at App.vue:7","App Show")},onHide:function(){e("log","at App.vue:10","App Hide")}};const{app:a,Vuex:i,Pinia:r}={app:t.createVueApp(n)};uni.Vuex=i,uni.Pinia=r,a.provide("__globalStyles",__uniConfig.styles),a._component.mpType="app",a._component.render=()=>{},a.mount("#app")}(Vue);
